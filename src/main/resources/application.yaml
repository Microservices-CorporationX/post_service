spring:
  datasource:
    driver-class-name: org.postgresql.Driver
    url: jdbc:postgresql://localhost:5432/postgres
    username: user
    password: password

  jpa:
    database-platform: org.hibernate.dialect.PostgreSQLDialect
    hibernate:
      ddl-auto: none
    show-sql: true
    properties:
      hibernate:
        format_sql: true

  liquibase:
    change-log: classpath:db/changelog/db.changelog-master.yaml

  data:
    redis:
      port: 6379
      host: localhost
      channels:
        calculations_channel:
          name: calculations_channel

server:
  port: 8081

logging:
  level:
    root: info
    io.github.resilience4j.retry: DEBUG
    io.github.resilience4j.circuitbreaker: DEBUG

user-service:
  host: localhost
  port: 8080
project-service:
  host: localhost
  port: 8082
payment-service:
  host: localhost
  port: 9080

api:
  content-analysis-service:
    base-url: https://api.sightengine.com
    key: 1300876459
    secret: 3aFptFRLejnfzx9kYkBhnSasJKymfQao

resilience4j:
  circuitbreaker:
    instances:
      sightengine-api-circuit-breaker:
        failure-rate-threshold: 50
        wait-duration-in-open-state: 30s
        sliding-window-size: 10
        sliding-window-type: COUNT_BASED
        minimum-number-of-calls: 5
        permitted-number-of-calls-in-half-open-state: 3
  retry:
    instances:
      sightengine-api-retry:
        max-attempts: 5
        wait-duration: 200ms
        exponential-backoff-multiplier: 2.0

thread-pool:
  verification-content-pool:
    num-of-thread: 5
    num-of-chunk: 10

schedule:
  verify-posts:
    cron: "0 0 3 * * ?"

moderation:
  dictionary:
    path: src/main/resources/dictionary.json
    text-split-regex: "[^\\p{L}\\p{N}]+"
  targets:
    sexual: 0.7
    discriminatory: 0.7
    insulting: 0.7
    violent: 0.7
    toxic: 0.7